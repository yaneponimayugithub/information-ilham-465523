# Отчет по лабораторной работе №5  
**Курс:** Информатика  
**Тема:** Git  
**Выполнил:** Гашимов И.Ф. (К3139)  
**Проверил:** Болгова К.

---

### Цель работы
Целью работы является настройка и тестирование pre-commit hook в Git для автоматической проверки файлов перед коммитом. Для проверки используется скрипт, который позволяет убедиться, что:
1. Все файлы с расширением `.txt` содержат подпись "Автор:".
2. Файлы других форматов не могут быть добавлены в репозиторий.

### Шаги выполнения

#### 1. Переход в директорию проекта
Для начала, переходим в директорию с проектом `git-practice`:

```bash
cd git-practide
```

#### 2. Переход в папку с хуками Git
Далее переходим в директорию, где хранятся хуки Git:

```bash
cd .git/hooks
```

#### 3. Создание скрипта pre-commit
Создаем новый файл pre-commit для написания логики проверки файлов перед коммитом:

```bash
touch pre-commit
```

#### 4. Открытие файла для редактирования

```bash
gedit pre-commit
```

#### 5. Пишем логику проверку commit

```bash
#!/bin/bash

# Проходим по каждому файлу, который был добавлен в индекс для коммита
for file in $(git diff --cached --name-only); do
    # Проверяем, является ли файл .txt
    if [[ $file == *.txt ]]; then
        # Проверяем, есть ли в файле строка "Автор:"
        if grep -q "Автор:" "$file"; then
            echo "Файл '$file' соответствует формату и имеет подпись автора."
        else
            # Если подписи нет, выводим ошибку
            echo "Ошибка: Файл '$file' соответствует формату, но не имеет подписи автора."
            exit 1
        fi
    else
        # Если файл не .txt, выводим ошибку
        echo "Ошибка: Файл '$file' не соответствует формату!"
        exit 1
    fi
done
```
### Так же выдаем права на выполнение через

```bash
chmod +x pre-commit
```


#### В консоль выводятся сообщения, соответствующие результатам проверки:

#### Если файл соответствует формату и содержит подпись автора, выводится сообщение о том, что файл прошел проверку.
#### Если файл не соответствует формату или не имеет подписи автора, выводится соответствующая ошибка.


#### Если все проверки прошли успешно, скрипт позволяет продолжить коммит. Если хотя бы один файл не прошел проверку, скрипт завершает выполнение с ошибкой, и коммит блокируется.





Подготовка файлов для тестирования
Для проверки работы скрипта были созданы следующие файлы:

txtfile_without_author.txt — файл с текстом, но без подписи автора (не соответствует требованиям).

txtfile_with_author.txt — файл с текстом и подписью "Автор:" (соответствует требованиям).

notxt.py — файл с расширением .py, который не соответствует формату .txt.

![Снимок экрана 2024-12-02 233256](https://github.com/user-attachments/assets/efe59f28-139d-4b25-92db-79bc4b18b046)

![Снимок экрана 2024-12-02 233734](https://github.com/user-attachments/assets/46744baf-41e1-448e-af87-08974cd2462c)

### Заключение

#### В ходе лабораторной работы был настроен Git hook для проверки файлов перед коммитом. Скрипт проверяет, что коммитятся только .txt файлы с подписью "Автор:". Если файл не соответствует этим требованиям, коммит блокируется. Все тесты прошли успешно, и система работает как ожидается.
